from fastmcp import FastMCP
import json
import datetime
from langchain_community.chat_models import GigaChat
from langchain_core.messages import HumanMessage, SystemMessage
from contextlib import redirect_stdout
import streamlit as st
import asyncio
import logging
import httpx

from typing import Any
from uuid import uuid4


PRE_PROMPT = "–¢—ã –≤—ã—Å—Ç—É–ø–∞–µ—à—å –≤ —Ä–æ–ª–∏ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º, –∫–æ—Ç–æ—Ä–∞—è –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ –†–æ—Å—Å–∏–∏ –∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ –Ω–∏—Ö.–¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –≥—Ä—É–ø–ø.–ü–æ–¥—Ä–æ–±–Ω–æ –æ—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç–Ω–æ –±—ã–ª–æ –¥–∞–∂–µ —à–∫–æ–ª—å–Ω–∏–∫—É. –ò–∑–±–µ–≥–∞–π –æ–ø–∞—Å–Ω—ã—Ö —Ç–µ–º –æ—Ç–≤–µ—Ç–æ–º: '–¢–µ–±–µ –µ—â—ë —Ä–∞–Ω–æ –æ–± —ç—Ç–æ–º –∑–Ω–∞—Ç—å!'"  # –±–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç
ROLE = '–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç'  # –ò–∑–º–µ–Ω–∏—Ç–µ —ç—Ç–æ –Ω–∞ —Å–≤–æ—é —Ä–æ–ª—å

MODELS = {  # –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–µ–π
    'GigaChat Light': 'GigaChat Light',
    'GigaChat Pro': 'GigaChat Pro',
    'GigaChat Max': 'GigaChat Max',
}

def setup_session_state():
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–∏"""
    if "api_key" not in st.session_state:
        st.session_state.api_key = ""  # –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∫–ª—é—á –ø—É—Å—Ç–æ–π
    if "api_connected" not in st.session_state:
        st.session_state.api_connected = False  # –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ
    if "chat_dialogue" not in st.session_state:
        st.session_state.chat_dialogue = []
    if "prompt" not in st.session_state:
        st.session_state.prompt = PRE_PROMPT
    if "role" not in st.session_state:
        st.session_state.role = ROLE
    if "selected_model" not in st.session_state:
        st.session_state.selected_model = 'GigaChat Light'
    if "giga" not in st.session_state:
        st.session_state.giga = None

def render_settings():
    with st.sidebar:
        st.header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è")

        # –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ API-–∫–ª—é—á–∞
        api_input = st.text_input(
            "–í–≤–µ–¥–∏—Ç–µ API-–∫–ª—é—á GigaChat:",  # –¢–µ–∫—Å—Ç-–ø–æ–¥—Å–∫–∞–∑–∫–∞
            type="password",  # –ü—Ä—è—á–µ–º –≤–≤–µ–¥—ë–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
            key="api_key_input"  # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—è
        )

        # –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        if st.button("–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ API"):
            if api_input:
                st.session_state.api_key = api_input
                try:
                    st.session_state.giga = GigaChat(credentials=api_input, verify_ssl_certs=False)
                    st.session_state.api_connected = True
                    st.success("‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!")
                except Exception as e:
                    st.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: {str(e)}")
                    st.session_state.api_connected = False
            else:
                st.error("‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ API-–∫–ª—é—á")

        st.header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞")
        st.session_state.role = st.sidebar.text_input("–†–æ–ª—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞", value=st.session_state.role)
        st.session_state.prompt = st.sidebar.text_area("–ü—Ä–æ–º–ø—Ç", value=st.session_state.prompt)
        st.session_state.selected_model = st.sidebar.selectbox("–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏", list(MODELS.keys()))

def render_chat_history():
    """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞"""
    st.header("üí¨ –ß–∞—Ç —Å GigaChat")

    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
    chat_container = st.container()
    with chat_container:
        for message in st.session_state.chat_dialogue:
            with st.chat_message(message["role"]):
                st.markdown(message["content"])

def generate_response(messages):
    if not st.session_state.api_key:
        return "‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ API-–∫–ª—é—á –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –∏ –Ω–∞–∂–º–∏—Ç–µ '–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ API'"
    if not st.session_state.giga:
        return "‚ö†Ô∏è –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"

    try:
        response = st.session_state.giga.invoke(messages)
        return response.content
    except Exception as e:
        return f"‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {str(e)}"

def handle_user_input():
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    user_input3 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='ui3')
    if user_input3:
        # –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∏—Å—Ç–æ—Ä–∏—é
        st.session_state.chat_dialogue.append({
            "role": "user",
            "content": user_input3
        })

        # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        with st.chat_message("user"):
            st.markdown(user_input3)

        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
        generate_assistant_response(user_input3)

def generate_assistant_response(user_input4):
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞"""
    # –°–æ–±–∏—Ä–∞–µ–º –≤–µ—Å—å –¥–∏–∞–ª–æ–≥ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
    dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
    dialogue += "\nAssistant: "

    messages = [
        SystemMessage(content=st.session_state.prompt),
        HumanMessage(content=dialogue),
    ]

    with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –ü–æ–¥–±–∏—Ä–∞—é –æ—Ç–≤–µ—Ç –Ω–∞ –í–∞—à –≤–æ–ø—Ä–æ—Å...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        full_response = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(full_response)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
    st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": full_response
    })

import asyncio
import logging
import httpx

from typing import Any
from uuid import uuid4

# –°–æ–∑–¥–∞–µ–º —Å–µ—Ä–≤–µ—Ä
mcp = FastMCP(
    name="SmartTour Assistant",
    instructions="–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è SmartTour MCP"
)


# === –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ ===

@mcp.tool 
async def route_agent(user_input2,prompt,pointA,pointB,context,sights)-> str:
  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –ø–æ–¥–æ–±—Ä–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–¥–±–æ—Ä–æ–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}, —Å–¥–µ–ª–∞–π –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π {sights}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uir')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
    response_placeholder = st.empty()
    response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
    response1 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
    response_placeholder.markdown(response1)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response1
    })
    
  with open('route1.txt',"w") as f2:
    with redirect_stdout(f2):
      text = response1
      #print("—Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞  :", response1)

  base_info= '''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
SystemMessage(content="system"),HumanMessage(content=base_info+ f"{user_input2}")
    ]
  return response1
  f2.close()

@mcp.tool
async def hotel_agent(user_input2,prompt,context,pointA,pointB)-> str:

  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –ø–æ–¥–æ–±—Ä–∞—Ç—å –≥–æ—Å—Ç–∏–Ω–∏—Ü—É, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–¥–±–æ—Ä–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}. '''


  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uih')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]
  with st.chat_message("assistant"):
    response_placeholder = st.empty()
    response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
    response2 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
    response_placeholder.markdown(response2)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
    st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response2
    })

    
  with open('hotel1.txt',"w") as f3:
    with redirect_stdout(f3):
      text = response2
      #print("—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∞ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã:", response2)

  base_info1= '''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
  SystemMessage(content="system"),HumanMessage(content=base_info1+ f"{user_input2}")
    ]

  return response2
  f3.close()

@mcp.tool
async def time_agent(user_input2,prompt,context,pointA,pointB)-> str:

  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –æ—Ü–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –∏ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –ø–æ–µ–∑–¥–∫—É, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ü–µ–Ω–∫–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}. '''


  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uit')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
    response_placeholder = st.empty()
    response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
    response3 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
    response_placeholder.markdown(response3)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
    st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response3
    })
    
  with open('time1.txt',"w") as f4:
    with redirect_stdout(f4):
      text = response3
      #print("–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç :", response3)

  base_info2= '''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
  SystemMessage(content="system"),HumanMessage(content=base_info2+ f"{user_input2}")
    ]
  return response3
  f4.close()

@mcp.tool
async def booking_services_agent(user_input2,prompt,context,pointA,pointB)-> str:

  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uib')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
    response_placeholder = st.empty()
    response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
    response4 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
    response_placeholder.markdown(response4)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
    st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response4
    })

  with open('booking_services1.txt',"w") as f5:
    with redirect_stdout(f5):
      text = response4
      #print("–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: ", response4)

  base_info3= '''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
  SystemMessage(content="system"),HumanMessage(content=base_info3+ f"{user_input2}")
    ]
  return response4
  f5.close()

@mcp.tool
async def info_agent(user_input2,prompt,context,pointA,pointB)-> str:

  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≥–æ–¥–µ, –ø—Ä–æ–±–∫–∞—Ö –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uii')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        response6 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(response6)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response6
    })
    
  with open('info1.txt',"w") as f6:
    with redirect_stdout(f6):
        
      text = response6
      #print("–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ :", response5)

  base_info4= '''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
  SystemMessage(content="system"),HumanMessage(content=base_info4+ f"{user_input2}")
    ]
  return response6
  f6.close()

@mcp.tool
async def feedback_agent(user_input2,prompt,context,pointA,pointB)-> str:

  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω —Å–æ–±—Ä–∞—Ç—å –æ—Ç–∑—ã–≤—ã –æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''
  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uif')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]
  with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        response7 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(response7)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response7
    })
    
  with open('feedback1.txt',"w") as f7:
     with redirect_stdout(f7):
      text = response7
      #print("–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∞ –æ—Ç–∑—ã–≤–æ–≤: ", response7)

  base_info5= '''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
  SystemMessage(content="system"),HumanMessage(content=base_info5+ f"{user_input2}")
    ]
  return response7
  f7.close()

@mcp.tool
async def consult_agent(user_input2,prompt,context)-> str:

  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å —Ç—É—Ä–∏—Å—Ç–∞, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ñ—Ä–∞–∑—ã {context}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uic')
  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        response8 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(response8)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response8
    })
    
  with open('consult1.txt',"w") as f8:
    with redirect_stdout(f8):
      text = response8
      #print("–†–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏: ", response8)

  base_info6= '''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
  SystemMessage(content="system"),HumanMessage(content=base_info6+ f"{user_input2}")
    ]
  return response8
  f8.close()

@mcp.tool
async def rating_agent(user_input2,prompt,context,pointA,pointB)-> str:

  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –æ—Ü–µ–Ω–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uir')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        response9 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(response9)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response9
    })
    
  with open('rating1.txt',"w") as f9:
    with redirect_stdout(f9):
      text = response9
      print("–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ü–µ–Ω–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞: ", response9)

  base_info7= '''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
  SystemMessage(content="system"),HumanMessage(content=base_info7+ f"{user_input2}")
    ]

  return response9
  f9.close()

@mcp.tool
async def motivate_agent(user_input2,prompt,context)-> str:

  #prompt = self.generate_prompt(prompt,task_description)
  system = f'–¢—ã –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Å–∫–∞–∑—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –±–∞–ª–ª–∞—Ö –∏ –∞–∫—Ü–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∑–∞ –¥–æ–ª–≥–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞. –ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ —É—á–∏—Ç—ã–≤–∞–π {prompt} –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç {context}.'

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uim')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        response23 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(response23)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response23
    })
    
  with open('actions1.txt',"w") as f21:
    with redirect_stdout(f21):
      text = response23
      #print("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫—Ü–∏—è—Ö –∏ –±–∞–ª–ª–∞—Ö :", response23)

  base_info_c='''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
SystemMessage(content="system"),HumanMessage(content=base_info_c+ f"{user_input2}")
    ]
  return response23
  f21.close()

def demand_cost(user_input2,prompt,context,pointA,pointB)-> str:

  #prompt = self.generate_prompt(prompt,task_description)
  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –æ—Ü–µ–Ω–∏—Ç—å —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç –∏ –µ–≥–æ —Å—Ç–æ–∏–º–æ—Å—Ç—å, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uidc')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
    response_placeholder = st.empty()
    response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
    response25 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
    response_placeholder.markdown(response25)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
    st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response25
    })
    
  with open('demand_cost1.txt',"w") as f25:
    with redirect_stdout(f25):
      text = response25
      #print("–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ü–µ–Ω–∫–∏ —Å–ø—Ä–æ—Å–∞ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞  :", response25)

  base_info_s='''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
SystemMessage(content="system"),HumanMessage(content=base_info_s+ f"{user_input2}")
    ]

  f25.close()
  return response25

@mcp.tool
async def culture_agent(user_input2,prompt,context,pointA,pointB)-> str:

  #prompt = self.generate_prompt(prompt,task_description)
  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uica')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
      response_placeholder = st.empty()
      response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
      response27 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
      response_placeholder.markdown(response27)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
            "role": "assistant",
        "content": response27
    })
    
  with open('culture1.txt',"w") as f26:
    with redirect_stdout(f26):
      text = response27
      #print("–û–ø–∏—Å–∞–Ω–∏–µ –∫—É–ª—å—Ç—É—Ä–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞  :", response27)

  base_info_s='''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
SystemMessage(content="system"),HumanMessage(content=base_info_s+ f"{user_input2}")
    ]

  f26.close()
  return response27

@mcp.tool
async def extrim_agent(user_input2,prompt,context,pointA,pointB)-> str:

  #prompt = self.generate_prompt(prompt,task_description)
  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–∞–≤–∏—Ç—å —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫—ã–π –º–∞—Ä—à—Ä—É—Ç, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uixt')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        response29 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(response29)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response29
    })
    
  with open('extrim1.txt',"w") as f28:
    with redirect_stdout(f28):
      text = response29
      #print("–û–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–≥–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞  :", response29)


  base_info_s='''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
SystemMessage(content="system"),HumanMessage(content=base_info_s+ f"{user_input2}")
    ]

  f28.close()
  return response29

@mcp.tool
async def help_agent(user_input2,prompt,context,pointA,pointB)-> str:

  #prompt = self.generate_prompt(prompt,task_description)
  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –æ–ø–æ–≤–µ—Å—Ç–∏—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uihp')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        response31 = generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(response31)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response31
    })
    
  with open('help1.txt',"w") as f30:
    with redirect_stdout(f30):
      text = response31
      #print("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ß–ü –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ  :", response31)

  base_info_s='''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
SystemMessage(content="system"),HumanMessage(content=base_info_s+ f"{user_input2}")
    ]

  f30.close()
  return response31

@mcp.tool
async def weather_agent(user_input2,prompt,context,pointA,pointB)-> str:

  #prompt = self.generate_prompt(prompt,task_description)
  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω –æ–ø–æ–≤–µ—Å—Ç–∏—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ {context}, —É—á–∏—Ç—ã–≤–∞—è –ø—É–Ω–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è {pointA} –∏ –ø—É–Ω–∫—Ç –ø—Ä–∏–±—ã—Ç–∏—è {pointB}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uiwa')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        response33= generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(response33)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response33
    })
    
  with open('weather1.txt',"w") as f32:
    with redirect_stdout(f32):
      text = response33
      #print("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–≥–æ–¥–µ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ  :", response33)

  base_info_s='''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

  messages = [
SystemMessage(content="system"),HumanMessage(content=base_info_s+ f"{user_input2}")
    ]

  f32.close()
  return response33

@mcp.tool
async def analytics_agent(user_input2,prompt,context)-> str:

  #prompt = self.generate_prompt(prompt,task_description)
  system = f'''–¢—ã –¥–æ–ª–∂–µ–Ω  –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –æ—Ç–∑—ã–≤–∞ —Ç—É—Ä–∏—Å—Ç–∞ –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}. –û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –ø–æ –≤–≤–µ–¥–µ–Ω–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É. –ù–∞–ø–∏—à–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Ç–µ–∫—Å—Ç–∞, –ø–æ—Ä–µ–∫–∫–æ–º–µ–Ω–¥—É–π —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å —É—á–µ—Ç–æ–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π —Ç—É—Ä–∏—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑–∞–Ω—ã –≤ —Ç–µ–∫—Å—Ç–µ. –ü–æ—Ä–µ–∫–æ–º–µ–Ω–¥—É–π —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–µ. –ù–∞–ø–∏—à–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –∏ –≤–æ–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑–∞–Ω—ã –≤ —Ç–µ–∫—Å—Ç–µ.–ü–æ—Ä–µ–∫–æ–º–µ–Ω–¥—É–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑–∞–Ω –≤ —Ç–µ–∫—Å—Ç–µ. –û—Ü–µ–Ω–∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥ –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑–∞–Ω—ã –≤ —Ç–µ–∫—Å—Ç–µ. –ù–∞–ø–∏—à–∏ –æ–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ–µ–∑–¥–∫–µ —Å —É—á–µ—Ç–æ–º –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç—É—Ä–∏—Å—Ç–∞.'''

  dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
  dialogue += "\nAssistant: "
  user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='uiwa')

  messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

  with st.chat_message("assistant"):
        response_placeholder = st.empty()
        response_placeholder.markdown("‚è≥ –í—ã–ø–æ–ª–Ω—è—é –∞–Ω–∞–ª–∏–∑...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
        response34= generate_response(messages)

        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
        response_placeholder.markdown(response34)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
  st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": response34
    })
    
  with open('analytics.txt',"w") as f34:
    with redirect_stdout(f34):
      text = response34
      #print("–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É  :", response34)

  base_info_s='''–¢—ã - –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤.
  –¢–≤–æ—è –∑–∞–¥–∞—á–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ –∞–Ω–∞–ª–∏–∑–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–∂–µ–ª–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤ –∞–Ω–∞–ª–∏–∑–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –ø–æ–µ–∑–¥–∫–µ, –∞–Ω–∞–ª–∏–∑–µ –∫–∞—á–µ—Å—Ç–≤–∞ –≥–æ—Å—Ç–∏–Ω–∏—Ü –∏ –æ—Ç–µ–ª–µ–π, –≤ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –ø–æ–µ–∑–¥–∫–µ.
  –í—ã–≤–æ–¥–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–µ–∑–¥–∫–∏. –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É —Ä–µ–≥–∏–æ–Ω—É, –∫–æ—Ç–æ—Ä—ã–π —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç. –û—Ü–µ–Ω–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–∏–Ω–∏—Ü –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–≥–∏–æ–Ω–µ, –∫–æ—Ç–æ—Ä—ã–π —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç.
  –û—Ü–µ–Ω–∏ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–æ–∫ –≤ —Ä–µ–≥–∏–æ–Ω–µ, –∫–æ—Ç–æ—Ä—ã–π —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç, –∏ –Ω–∞–ø–∏—à–∏ –ø—Ä–æ–≥–Ω–æ–∑—ã –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –ø–æ—Ç–æ–∫—É –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ 5 –ª–µ—Ç.
  –í—ã–±–µ—Ä–∏ –Ω–∞–∏–±–æ–ª–µ–µ –∑–Ω–∞—á–∏–º—ã–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–≥–∏–æ–Ω–µ, –∫–æ—Ç–æ—Ä—ã–π —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç.
  –í—ã–±–µ—Ä–∏ –±–ª–∏–∂–∞–π—à–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –∏ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–≥–∏–æ–Ω–µ, –∫–æ—Ç–æ—Ä—ã–π —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç.
  –û—Ü–µ–Ω–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–∏–Ω–∏—Ü –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–≥–∏–æ–Ω–µ, –∫–æ—Ç–æ—Ä—ã–π —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç.
  –í—ã–≤–µ–¥–∏ –æ–±—â—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É —Ç—É—Ä–∏–∑–º–∞ –≤ —Ä–µ–≥–∏–æ–Ω–µ. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ç—É—Ä–∏–∑–º—É –≤ —Ä–µ–≥–∏–æ–Ω–µ –Ω–µ—Ç, —Ç–æ –æ—Ç–≤–µ—Ç—å, —á—Ç–æ —Ç—ã –Ω–µ –º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ—Å–æ–≤–µ—Ç—É–π —Å–∞–π—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—É—Ä–∏–∑–º–∞ –≤ —Ä–µ–≥–∏–æ–Ω–µ.
  –ï—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ, —Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–π –∞–Ω–∞–ª–∏—Ç–∏–∫—É –≤ –≤–∏–¥–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤–∏ –¥–∏–∞–≥—Ä–∞–º–º. –ï—Å–ª–∏ —Ç—ã –Ω–µ –º–æ–∂–µ—à—å –ø–æ–∫–∞–∑–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã, —Ç–æ —É–∫–∞–∂–∏ —Å–∞–π—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂—ç–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É —Ä–µ–≥–∏–æ–Ω—É, –∫–æ—Ç–æ—Ä—ã–π —É–ø–æ–º–∏–Ω–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç.
'''

  messages = [
SystemMessage(content="system"),HumanMessage(content=base_info_s+ f"{user_input2}")
    ]

  f34.close()
  return response34

@mcp.tool
async def reg_agent(user_input2,prompt,name,email,context,phone_num,soc_acc)-> str:

    #prompt = self.generate_prompt(prompt,task_description)
    system = f'–ö–∞–∫ –∞–≥–µ–Ω—Ç –ø–æ —Å–±–æ—Ä—É –¥–∞–Ω–Ω—ã—Ö –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç—ã –¥–æ–ª–∂–µ–Ω –æ–±—â–∞—Ç—å—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ç–∞–∫—Ç–∏—á–Ω–æ –∏ –≤–µ–∂–ª–∏–≤–æ. –ü–æ–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {name}, —É—á–∏—Ç—ã–≤–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç {context}. –ó–∞–ø–æ–º–Ω–∏ –∏–º—è {name} –∏ —Ç–µ–ª–µ—Ñ–æ–Ω {phone_num} –∏ –∞–∫–∫–∞—É–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ {soc_acc}. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–æ–º–ø—Ç {prompt}.'
    dialogue = "\n".join([f"{msg['role'].capitalize()}: {msg['content']}" for msg in st.session_state['chat_dialogue']])
    dialogue += "\nAssistant: "
    user_input2 = st.chat_input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:",key='ui2')

    messages = [
        SystemMessage(content=system),
        HumanMessage(content=dialogue),
    ]

    with st.chat_message("assistant"):
        response_placeholder = st.empty()
        now = datetime.now()
    with open('reg_agent_time.txt',"w") as fr:

            response_placeholder.markdown("‚è≥ –î—É–º–∞—é...")

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
    full_response = generate_response(messages)
    now1 = datetime.now()
    time_delta = now1- now
    #print(time_delta)
    seconds = time_delta.total_seconds()
    #print(seconds)
    #fr.write(str(seconds))


        # –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
    response_placeholder.markdown(full_response)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
    st.session_state.chat_dialogue.append({
        "role": "assistant",
        "content": full_response
    })

    with open('reg_agent1.txt',"w") as f:
        with redirect_stdout(f):
              text = full_response
              #print("–û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", full_response)

    base_info_s='''–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –≤ –≤–∏–¥–µ —á–∞—Ç-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–æ–≤ –∏ –º–∞–ª—ã—Ö –≥—Ä—É–ø–ø —Ç—É—Ä–∏—Å—Ç–æ–≤, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–µ—Ç —Ç—É—Ä–∏—Å—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –≤ –¥—Ä—É–≥–æ–π, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫–∏ –≤ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –∏ —Ä–µ–≥–∏–æ–Ω—ã –†–§. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –≤ —Ç—É—Ä–∏–∑–º–µ. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–ø—Ä–æ—Å –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü—ã –∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ —Ç—É—Ä–∏—Å—Ç–æ–≤. –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã,–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É, –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∏—á–∏–∏ –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö Booking.com,AviaSales,AirBnb. –ö–æ–Ω—Å—É–ª—å—Ç–∞–µ—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å-–∫–∞—Ä—Ç –∏ Google-–∫–∞—Ä—Ç.
  –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ PayPal,–Ø–Ω–¥–µ–∫—ÅPay, —Ä–∞–∑–Ω—ã–º–∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤ –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω-–∫–∞—Ä—Ç—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—á–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –æ—Ä–≥–∞–Ω–∏–∑–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –≤ –≤–∏–¥–µ –µ–¥–∏–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏–∑ —Å–∞–π—Ç–∞, –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ telegram-–±–æ—Ç–∞. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –±–∞–ª–ª–∞–º–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ telegram-–±–æ—Ç–∞, —Å–æ–æ–±—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç—É –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–µ–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ø—Ä–æ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–º–∞ –º–æ–∂–µ—à—å —É—á–∏—Ç—ã–≤–∞—Ç—å –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö. –¢—ã –∫–∞–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –º–æ–∂–µ—à—å –ø—Ä–µ–¥—Å–æ—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä,–≥–æ—Ä–Ω—ã—Ö –ø–æ—Ö–æ–¥–æ–≤), —É–≤–µ–¥–æ–º–ª—è—Ç—å —Ç—É—Ä–∏—Å—Ç–∞ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞–º, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≥–æ–¥—ã, –æ–ø–æ–≤–µ—â–∞—Ç—å —Ç—É—Ä–∏—Å—Ç–º–∞ –æ –ø—É–Ω–∫—Ç–∞—Ö –ø–æ–ª—É—á–µ–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–º–æ—â–∏ –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö'''

    messages = [SystemMessage(content="system"),HumanMessage(content=base_info_s+ f"{user_input2}")]

    f.close()
    fr.close()
    return full_response

# === –†–ï–°–£–†–°–´ ===
@mcp.resource("system://status")
def system_status() -> str:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞"""
    return json.dumps({
        "status": "online",
        "timestamp": datetime.datetime.now().isoformat(),
        "version": "1.0.0"
    })

    
@mcp.resource("help://{topic}")
def get_help(topic: str) -> str:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–µ–º–µ"""
    help_docs = {
        "reg_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ reg_agent –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ telegram",
        "route_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ route_agent –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞",
        "hotel_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ hotel_agent –≤ –ø–æ–∏—Å–∫–µ –≥–æ—Å—Ç–∏–Ω–∏—Ü –∏ –æ—Ç–µ–ª–µ–π –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤",
        "time_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ  time_agent –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–µ–∑–¥–æ–∫",
        "booking_services_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ booking_services_agent –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –≤ –ø–æ–µ–∑–¥–∫–µ",
        "info_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ info_agent –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—É—Ä–∏—Å—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É",
        "feedback_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ feedback_agent –¥–ª—è —Å–±–æ—Ä–∞ –æ—Ç–∑—ã–≤–æ–≤ –æ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ",
        "consult_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ consult_agen –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ —Ç—É—Ä–∏—Å—Ç—É –æ –ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–º –º–∞—Ä—à—Ä—É—Ç–µ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö –ø–æ–µ–∑–¥–∫–∏",
        "rating_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ rating_agent –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞",
        "motivate_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ motivate_agent –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—É—Ä–∏—Å—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∫–∏–¥–∫–∞—Ö –∏ –∞–∞–∞–∫—Ü–∏—è—Ö –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –≤–æ –≤—Ä–µ–º—è —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–µ–∑–¥–∫–∏",
        "demand_cost_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ demand_cost_agent –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ —Å–ø—Ä–æ—Å–∞ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞",
        "culture_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ  culture_agent –¥–ª—è –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è —Ç—É—Ä–∏—Å—Ç–æ–≤ —Å –∫—É–ª—å—Ç—É—Ä–Ω—ã–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –∏ —Ç—Ä–∞–¥–∏—Ü–∏—è–º–∏ –≤ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–µ–∑–¥–∫–µ –∏ —Ä–µ–≥–∏–æ–Ω–µ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è —Ç—É—Ä–∏—Å—Ç–æ–≤",
        "extrim_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ extrim_agent –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç–∫—Å—Ç–µ—Ä–µ–º–∞–ª—å–Ω—ã—Ö —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ —Ä–µ–≥–∏–æ–Ω–µ –ø—Ä–µ–±—ã–≤–Ω–∏—è —Ç—É—Ä–∏—Å—Ç–æ–≤",
        "help_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ help_agent –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—É—Ä–∏—Å—Ç–∞–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ –∏ –≤ —Ä–µ–≥–∏–æ–Ω–µ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è —Ç—É—Ä–∏—Å—Ç–æ–≤",
        "weather_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ weather_agent –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—É—Ä–∏—Å—Ç–æ–≤ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø–æ–≥–æ–¥—ã –Ω–∞ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ",
        "analytics_agent": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ analytics_agent –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ —Ç—É—Ä–∏—Å—Ç—É –æ–± –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–º  —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –º–∞—Ä—à—Ä—É—Ç–µ (–æ—Ç–∑—ã–≤—ã –¥—Ä—É–≥–∏—Ö —Ç7—É—Ä–∏—Å—Ç–æ–≤,–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–µ–∑–¥–æ–∫, —Å—Ç–æ–∏–º–æ—Å—Ç—å, —á–∞—Å—Ç–æ—Ç–∞ –ø–æ—Å–µ—â–µ–Ω–∏–π –¥—Ä—É–≥–∏–º–∏ —Ç—É—Ä–∏—Å—Ç–∞–º–∏), –∫–∞—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–∏–Ω–∏—Ü,7 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –∏ –∫–∞—Ñ–µ",
        "status": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ system://status –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã"
    }
    return help_docs.get(topic, f"–°–ø—Ä–∞–≤–∫–∞ –ø–æ —Ç–µ–º–µ '{topic}' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")

  
# === –ü–†–û–ú–ü–¢–´ ===
@mcp.prompt
def security_check(action: str) -> str:
    """–°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è"""
    return f"""
    –¢—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. 
    –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: {action}
    
    –û—Ü–µ–Ω–∏:
    1. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏
    2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏  
    3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã
    """

  
@mcp.prompt
def explain_result(tool_name: str, result: str) -> str:
    """–û–±—ä—è—Å–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞"""
    return f"""
    –û–±—ä—è—Å–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ '{tool_name}':
    
    –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}
    
    –°–¥–µ–ª–∞–π –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ–Ω—è—Ç–Ω—ã–º –∏ –ø–æ–ª–µ–∑–Ω—ã–º, —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º.
    """


# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
if __name__ == "__main__":
    mcp.run(transport="http", port=8000)
